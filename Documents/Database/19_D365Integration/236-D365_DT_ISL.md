# D365_DT_ISL

**Procedure Number**: 236 | **Module**: M19 - D365 Integration | **Status**: âœ… ANALYZED

---

## Quick Reference

| Attribute | Value |
|-----------|-------|
| **Purpose** | Get Drawing Issue Line details for D365 ERP material consumption detail sync |
| **Operation** | SELECT |
| **Tables** | Drawing material issue detail table |
| **Called From** | D365DataService.cs |
| **Frequency** | High (ERP sync) |
| **Performance** | Fast |
| **Issues** | ðŸŸ¢ None identified |

---

## Parameters

### Input (IN)

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `P_BEAMLOT` | VARCHAR2(50) | âœ… | Beam lot number (production identifier) |

### Returns (Cursor)

| Column | Type | Description |
|--------|------|-------------|
| `LINENO` | NUMBER | Issue line sequence number |
| `ISSUEDATE` | DATE | Material issue date/time |
| `ITEMID` | VARCHAR2(50) | Item ID (weaver's beam) in D365 |
| `STYLEID` | VARCHAR2(50) | Style/variant ID |
| `QTY` | NUMBER | Quantity issued (consumed) |
| `UNIT` | VARCHAR2(50) | Unit of measure |
| `SERIALID` | VARCHAR2(50) | Serial/batch ID for traceability |

---

## Business Logic (What it does and why)

Retrieves Drawing material Issue Line details for D365 ERP synchronization. Issue Lines are the detail records showing each weaver's beam consumed in the drawing process. Each line represents one weaver's beam input with complete traceability through serial ID.

The procedure:
1. Takes beam lot number (production identifier)
2. Returns all issue line items for this lot
3. Each line shows which weaver's beam was consumed (ITEMID, SERIALID)
4. Includes quantity, unit, and issue date/time
5. Used to post material consumption transactions in D365
6. Enables backward traceability (which weaver's beams went into this drawing setup)

Synced after Issue Header (ISH) is posted to D365.

---

## Related Procedures

**Upstream**:
- [235-D365_DT_ISH.md](./235-D365_DT_ISH.md) - Issue header (must sync first)

**Related**:
- [234-D365_DT_BPO.md](./234-D365_DT_BPO.md) - Batch production order

---

## Query/Code Location

**DataService File**: `LuckyTex.AirBag.Core\\Services\\DataService\\D365DataService.cs`

**Database Manager File**: `LuckyTex.AirBag.Core\\Domains\\AirbagSPs.cs`
**Method**: `D365_DT_ISL(D365_DT_ISLParameter para)`
**Lines**: 33367-33412

---

**File**: 236/296 | **Progress**: 79.7%

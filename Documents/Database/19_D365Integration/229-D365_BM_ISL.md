# D365_BM_ISL

**Procedure Number**: 229 | **Module**: M19 - D365 Integration | **Status**: âœ… ANALYZED

---

## Quick Reference

| Attribute | Value |
|-----------|-------|
| **Purpose** | Get Beaming Issue Line details for D365 ERP material consumption detail sync |
| **Operation** | SELECT |
| **Tables** | Beaming material issue detail table |
| **Called From** | D365DataService.cs |
| **Frequency** | High (ERP sync) |
| **Performance** | Fast |
| **Issues** | ðŸŸ¢ None identified |

---

## Parameters

### Input (IN)

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `P_BEAMERNO` | VARCHAR2(50) | âœ… | Beamer number (production lot identifier) |

### Returns (Cursor)

| Column | Type | Description |
|--------|------|-------------|
| `LINENO` | NUMBER | Issue line sequence number |
| `ISSUEDATE` | DATE | Material issue date/time |
| `ITEMID` | VARCHAR2(50) | Item ID (warp beam) in D365 |
| `STYLEID` | VARCHAR2(50) | Style/variant ID |
| `QTY` | NUMBER | Quantity issued (consumed) |
| `UNIT` | VARCHAR2(50) | Unit of measure |
| `SERIALID` | VARCHAR2(50) | Serial/batch ID for traceability |

---

## Business Logic (What it does and why)

Retrieves Beaming material Issue Line details for D365 ERP synchronization. Issue Lines are the detail records showing each warp beam consumed in the beaming process. Each line represents one warp beam input with complete traceability through serial ID.

The procedure:
1. Takes beamer number (production lot ID)
2. Returns all issue line items for this lot
3. Each line shows which warp beam was consumed (ITEMID, SERIALID)
4. Includes quantity, unit, and issue date/time
5. Used to post material consumption transactions in D365
6. Enables backward traceability (which warp beams went into this weaver's beam)

Synced after Issue Header (ISH) is posted to D365.

---

## Related Procedures

**Upstream**:
- [228-D365_BM_ISH.md](./228-D365_BM_ISH.md) - Issue header (must sync first)

**Related**:
- [227-D365_BM_BPO.md](./227-D365_BM_BPO.md) - Batch production order

---

## Query/Code Location

**DataService File**: `LuckyTex.AirBag.Core\\Services\\DataService\\D365DataService.cs`

**Database Manager File**: `LuckyTex.AirBag.Core\\Domains\\AirbagSPs.cs`
**Method**: `D365_BM_ISL(D365_BM_ISLParameter para)`
**Lines**: 32989-33034

---

**File**: 229/296 | **Progress**: 77.4%
